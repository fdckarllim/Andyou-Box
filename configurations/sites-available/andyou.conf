# setup localhost
<VirtualHost *:80>
    ServerName inn-localhost.nativecamp.net
    DocumentRoot "/var/www/html"
    
    SetEnv INN_ENV local
    <Directory "/var/www/html">
        Options Indexes FollowSymLinks Includes ExecCGI
        AllowOverride All
        Require all granted
    </Directory>
</VirtualHost>

# setup localhost
<VirtualHost *:80>
    ServerName inn-athome.nativecamp.net
    DocumentRoot "/var/www/inn_at_home_front/app"

    SetEnv INN_ENV local
    <Directory "/var/www/inn_at_home_front/app">
        Options Indexes FollowSymLinks Includes ExecCGI
        AllowOverride All
        Require all granted
    </Directory>

    # add error log
    ErrorLog /var/log/apache2/inn_athome_error.log

    # add custom log
    LogFormat "%h %l %u %t \"%r\" %>s %b" common
    CustomLog /var/log/apache2/inn_athome_access.log common

    RewriteEngine On
    RewriteCond %{REQUEST_URI}  ^/socket.io            [NC]
    RewriteCond %{QUERY_STRING} transport=websocket    [NC]
    RewriteRule /(.*)           ws://inn-localhost.nativecamp.net:3000/$1 [P,L]

    SSLProxyEngine on
    ProxyRequests Off

    ProxyPass        /socket.io http://inn-localhost.nativecamp.net:3000/socket.io
    ProxyPassReverse /socket.io http://inn-localhost.nativecamp.net:3000/socket.io
    ProxyPass        /realtime_api http://inn-localhost.nativecamp.net:3000
    ProxyPassReverse /realtime_api http://inn-localhost.nativecamp.net:3000
    ProxyPass        /dm_api http://inn-localhost.nativecamp.net/inn_prototype_dm
</VirtualHost>

# setup localhost
<VirtualHost *:80>
    ServerName inn-localhost.nativecamp.net
    DocumentRoot "/var/www/html"

    SetEnv INN_ENV local
    <Directory "/var/www/html">
        Options Indexes FollowSymLinks Includes ExecCGI
        AllowOverride All
        Require all granted
    </Directory>
</VirtualHost>

# realtime
<VirtualHost *:80>
    ServerName inn-realtime.nativecamp.net
    DocumentRoot "/var/www/html"

    SetEnv INN_ENV local
    <Directory "/var/www/html">
        Options Indexes FollowSymLinks Includes ExecCGI
        AllowOverride All
        Require all granted
    </Directory>
</VirtualHost>

# setup admin webserver
<VirtualHost *:80>
    ServerName inn-admin.nativecamp.net
    DocumentRoot "/var/www/inn_admin/webroot"

    SetEnv INN_ENV local
    <Directory "/var/www/inn_admin/webroot">
        Options Indexes FollowSymLinks Includes ExecCGI
        AllowOverride All
        Require all granted
    </Directory>

    RewriteEngine On
    RewriteCond %{REQUEST_URI}  ^/socket.io            [NC]
    RewriteCond %{QUERY_STRING} transport=websocket    [NC]
    RewriteRule /(.*)           ws://inn-localhost.nativecamp.net:3000/$1 [P,L]

    SSLProxyEngine on
    ProxyRequests Off
    ProxyPass        /socket.io https://localhost:3000/socket.io
    ProxyPassReverse /socket.io https://inn-localhost.nativecamp.net:3000/socket.io
    ProxyPass        /realtime_api https://inn-localhost.nativecamp.net:3000
    ProxyPassReverse /realtime_api https://inn-localhost.nativecamp.net:3000
</VirtualHost>

# setup front webserver
<VirtualHost *:80>
    ServerName inn-variety.nativecamp.net
    DocumentRoot "/var/www/inn_macherie_front/webroot"

    LogFormat "%h %l %u %t \"%r\" %>s %b" common
    CustomLog /var/log/apache2/inn_front_access.log common

    SetEnv INN_ENV local
    <Directory "/var/www/inn_macherie_front/webroot">
        Options Indexes FollowSymLinks Includes ExecCGI
        AllowOverride All
        Require all granted
    </Directory>

    RewriteEngine On
    RewriteCond %{REQUEST_URI}  ^/socket.io            [NC]
    RewriteCond %{QUERY_STRING} transport=websocket    [NC]
    RewriteRule /(.*)           ws://inn-localhost.nativecamp.net:3000/$1 [P,L]

    SSLProxyEngine on
    ProxyRequests Off

    ProxyPass        /socket.io https://inn-localhost.nativecamp.net:3000/socket.io
    ProxyPassReverse /socket.io https://inn-localhost.nativecamp.net:3000/socket.io
    ProxyPass        /realtime_api https://inn-localhost.nativecamp.net:3000
    ProxyPassReverse /realtime_api https://inn-localhost.nativecamp.net:3000
    ProxyPass        /dm_api https://inn-localhost.nativecamp.net/inn_prototype_dm
    ProxyPassReverse /dm_api https://inn-localhost.nativecamp.net/inn_prototype_dm
</VirtualHost>

# setup dm webserver
<VirtualHost *:80>
    ServerName inn-dm.nativecamp.net
    DocumentRoot "/var/www/inn_prototype_dm"
    
    # add error log
    ErrorLog /var/log/apache2/inn_dm_error.log

    # add custom log
    LogFormat "%h %l %u %t \"%r\" %>s %b" common
    CustomLog /var/log/apache2/inn_dm_access.log common

    # set environment
    SetEnv INN_ENV local
    <Directory "/var/www/inn_prototype_dm">
        Options Indexes FollowSymLinks Includes ExecCGI
        AllowOverride All
        Require all granted
    </Directory>

    RewriteEngine On
    RewriteCond %{REQUEST_URI}  ^/socket.io            [NC]
    RewriteCond %{QUERY_STRING} transport=websocket    [NC]
    RewriteRule /(.*)           ws://inn-localhost.nativecamp.net:3000/$1 [P,L]

    SSLProxyEngine on
    ProxyRequests Off
    ProxyPass        /socket.io https://inn-localhost.nativecamp.net:3000/socket.io
    ProxyPassReverse /socket.io https://inn-localhost.nativecamp.net:3000/socket.io
    ProxyPass        /realtime_api https://inn-localhost.nativecamp.net:3000
    ProxyPassReverse /realtime_api https://inn-localhost.nativecamp.net:3000
</VirtualHost>

# setup dm webserver
<VirtualHost *:80>
    ServerName inn-mm.nativecamp.net
    DocumentRoot "/var/www/inn_prototype_mm"
    SetEnv INN_ENV local
    <Directory "/var/www/inn_prototype_mm">
        Options Indexes FollowSymLinks Includes ExecCGI
        AllowOverride All
        Require all granted
    </Directory>

    RewriteEngine On
    RewriteCond %{REQUEST_URI}  ^/socket.io            [NC]
    RewriteCond %{QUERY_STRING} transport=websocket    [NC]
    RewriteRule /(.*)           ws://inn-localhost.nativecamp.net:3000/$1 [P,L]

    SSLProxyEngine on
    ProxyRequests Off
    ProxyPass        /socket.io https://inn-localhost.nativecamp.net:3000/socket.io
    ProxyPassReverse /socket.io https://inn-localhost.nativecamp.net:3000/socket.io
    ProxyPass        /realtime_api https://inn-localhost.nativecamp.net:3000
    ProxyPassReverse /realtime_api https://inn-localhost.nativecamp.net:3000
</VirtualHost>

# -----------------------------------------------------------------
# -----------------------------------------------------------------
# -----------------------------------------------------------------
# -----------------------------------------------------------------
# -----------------------------------------------------------------
# -----------------------------------------------------------------
# -----------------------------------------------------------------
# -----------------------------------------------------------------
# -----------------------------------------------------------------
# -----------------------------------------------------------------
# -----------------------------------------------------------------
# -----------------------------------------------------------------

# setup localhost
<VirtualHost *:443>
    ServerName inn-athome.nativecamp.net
    DocumentRoot "/var/www/inn_at_home_front/app"

    SSLEngine on
    SSLCertificateFile /vagrant/ssl/stg-node.nativecamp.net.crt
    SSLCertificateKeyFile /vagrant/ssl/stg-node.nativecamp.net.nopass.key
    SSLCertificateChainFile /vagrant/ssl/stg-node.nativecamp.net.ca.crt

    SetEnv INN_ENV local
    <Directory "/var/www/inn_at_home_front/app">
        Options Indexes FollowSymLinks Includes ExecCGI
        AllowOverride All
        Require all granted
    </Directory>

    # add error log
    ErrorLog /var/log/apache2/inn_athome_error.log

    # add custom log
    LogFormat "%h %l %u %t \"%r\" %>s %b" common
    CustomLog /var/log/apache2/inn_athome_access.log common

    RewriteEngine On
    RewriteCond %{REQUEST_URI}  ^/socket.io            [NC]
    RewriteCond %{QUERY_STRING} transport=websocket    [NC]
    RewriteRule /(.*)           ws://inn-localhost.nativecamp.net:3002/$1 [P,L]
    
    SSLProxyEngine on
    ProxyRequests Off
    ProxyPass        /socket.io http://localhost:3002/socket.io
    ProxyPassReverse /socket.io http://inn-localhost.nativecamp.net:3002/socket.io
    ProxyPass        /realtime_api http://inn-localhost.nativecamp.net:3002
    ProxyPassReverse /realtime_api http://inn-localhost.nativecamp.net:3002
</VirtualHost>

# setup localhost
<VirtualHost *:443>
    ServerName inn-localhost.nativecamp.net
    DocumentRoot "/var/www/html"
    SSLEngine on
    SSLCertificateFile /vagrant/ssl/stg-node.nativecamp.net.crt
    SSLCertificateKeyFile /vagrant/ssl/stg-node.nativecamp.net.nopass.key
    SSLCertificateChainFile /vagrant/ssl/stg-node.nativecamp.net.ca.crt

    SetEnv INN_ENV local
    <Directory "/var/www/html">
        Options Indexes FollowSymLinks Includes ExecCGI
        AllowOverride All
        Require all granted
    </Directory>
</VirtualHost>

# realtime
<VirtualHost *:443>
    ServerName inn-realtime.nativecamp.net
    DocumentRoot "/var/www/html"
    SSLEngine on
    SSLCertificateFile /vagrant/ssl/stg-node.nativecamp.net.crt
    SSLCertificateKeyFile /vagrant/ssl/stg-node.nativecamp.net.nopass.key
    SSLCertificateChainFile /vagrant/ssl/stg-node.nativecamp.net.ca.crt

    SetEnv INN_ENV local
    <Directory "/var/www/html">
        Options Indexes FollowSymLinks Includes ExecCGI
        AllowOverride All
        Require all granted
    </Directory>
</VirtualHost>

# setup admin webserver
<VirtualHost *:443>
    ServerName inn-admin.nativecamp.net
    DocumentRoot "/var/www/inn_admin/webroot"
    SSLEngine on
    SSLCertificateFile /vagrant/ssl/stg-node.nativecamp.net.crt
    SSLCertificateKeyFile /vagrant/ssl/stg-node.nativecamp.net.nopass.key
    SSLCertificateChainFile /vagrant/ssl/stg-node.nativecamp.net.ca.crt

    SetEnv INN_ENV local
    <Directory "/var/www/inn_admin/webroot">
        Options Indexes FollowSymLinks Includes ExecCGI
        AllowOverride All
        Require all granted
    </Directory>

    RewriteEngine On
    RewriteCond %{REQUEST_URI}  ^/socket.io            [NC]
    RewriteCond %{QUERY_STRING} transport=websocket    [NC]
    RewriteRule /(.*)           ws://inn-localhost.nativecamp.net:3002/$1 [P,L]

    SSLProxyEngine on
    ProxyRequests Off
    ProxyPass        /socket.io https://localhost:3000/socket.io
    ProxyPass        /socket.io http://localhost:3002/socket.io
    ProxyPassReverse /socket.io http://inn-localhost.nativecamp.net:3002/socket.io
    ProxyPass        /realtime_api http://inn-localhost.nativecamp.net:3002
    ProxyPassReverse /realtime_api http://inn-localhost.nativecamp.net:3002
</VirtualHost>

# setup front webserver
<VirtualHost *:443>
    ServerName inn-variety.nativecamp.net
    DocumentRoot "/var/www/inn_macherie_front/webroot"
    SSLEngine on
    SSLCertificateFile /vagrant/ssl/stg-node.nativecamp.net.crt
    SSLCertificateKeyFile /vagrant/ssl/stg-node.nativecamp.net.nopass.key
    SSLCertificateChainFile /vagrant/ssl/stg-node.nativecamp.net.ca.crt

    LogFormat "%h %l %u %t \"%r\" %>s %b" common
    CustomLog /var/log/apache2/inn_front_access.log common

    SetEnv INN_ENV local
    <Directory "/var/www/inn_macherie_front/webroot">
        Options Indexes FollowSymLinks Includes ExecCGI
        AllowOverride All
        Require all granted
    </Directory>

    RewriteEngine On
    RewriteCond %{REQUEST_URI}  ^/socket.io            [NC]
    RewriteCond %{QUERY_STRING} transport=websocket    [NC]
    RewriteRule /(.*)           ws://inn-localhost.nativecamp.net:3000/$1 [P,L]

    SSLProxyEngine on
    ProxyRequests Off

    ProxyPass        /socket.io https://inn-localhost.nativecamp.net:3000/socket.io
    ProxyPassReverse /socket.io https://inn-localhost.nativecamp.net:3000/socket.io
    ProxyPass        /realtime_api https://inn-localhost.nativecamp.net:3000
    ProxyPassReverse /realtime_api https://inn-localhost.nativecamp.net:3000
    ProxyPass        /dm_api https://inn-localhost.nativecamp.net/inn_prototype_dm
    ProxyPassReverse /dm_api https://inn-localhost.nativecamp.net/inn_prototype_dm
</VirtualHost>

# setup dm webserver
<VirtualHost *:443>
    ServerName inn-dm.nativecamp.net
    DocumentRoot "/var/www/inn_prototype_dm"

    # ssl engine
    SSLEngine on
    SSLCertificateFile /vagrant/ssl/stg-node.nativecamp.net.crt
    SSLCertificateKeyFile /vagrant/ssl/stg-node.nativecamp.net.nopass.key
    SSLCertificateChainFile /vagrant/ssl/stg-node.nativecamp.net.ca.crt

    # add error log
    ErrorLog /var/log/apache2/inn_dm_error.log

    # add custom log
    LogFormat "%h %l %u %t \"%r\" %>s %b" common
    CustomLog /var/log/apache2/inn_dm_access.log common

    # set environment
    SetEnv INN_ENV local
    <Directory "/var/www/inn_prototype_dm">
        Options Indexes FollowSymLinks Includes ExecCGI
        AllowOverride All
        Require all granted
    </Directory>

    RewriteEngine On
    RewriteCond %{REQUEST_URI}  ^/socket.io            [NC]
    RewriteCond %{QUERY_STRING} transport=websocket    [NC]
    RewriteRule /(.*)           ws://inn-localhost.nativecamp.net:3000/$1 [P,L]

    SSLProxyEngine on
    ProxyRequests Off
    ProxyPass        /socket.io https://inn-localhost.nativecamp.net:3000/socket.io
    ProxyPassReverse /socket.io https://inn-localhost.nativecamp.net:3000/socket.io
    ProxyPass        /realtime_api https://inn-localhost.nativecamp.net:3000
    ProxyPassReverse /realtime_api https://inn-localhost.nativecamp.net:3000
</VirtualHost>

# setup dm webserver
<VirtualHost *:443>
    ServerName inn-mm.nativecamp.net
    DocumentRoot "/var/www/inn_prototype_mm"
    SSLEngine on
    SSLCertificateFile /vagrant/ssl/stg-node.nativecamp.net.crt
    SSLCertificateKeyFile /vagrant/ssl/stg-node.nativecamp.net.nopass.key
    SSLCertificateChainFile /vagrant/ssl/stg-node.nativecamp.net.ca.crt

    SetEnv INN_ENV local
    <Directory "/var/www/inn_prototype_mm">
        Options Indexes FollowSymLinks Includes ExecCGI
        AllowOverride All
        Require all granted
    </Directory>

    RewriteEngine On
    RewriteCond %{REQUEST_URI}  ^/socket.io            [NC]
    RewriteCond %{QUERY_STRING} transport=websocket    [NC]
    RewriteRule /(.*)           ws://inn-localhost.nativecamp.net:3000/$1 [P,L]

    SSLProxyEngine on
    ProxyRequests Off
    ProxyPass        /socket.io https://inn-localhost.nativecamp.net:3000/socket.io
    ProxyPassReverse /socket.io https://inn-localhost.nativecamp.net:3000/socket.io
    ProxyPass        /realtime_api https://inn-localhost.nativecamp.net:3000
    ProxyPassReverse /realtime_api https://inn-localhost.nativecamp.net:3000
</VirtualHost>